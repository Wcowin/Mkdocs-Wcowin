<!-- Footer -->
<footer class="md-footer">
  <!-- Link to previous and/or next page - ç§»åˆ°æœ€ä¸Šé¢ -->
  {% if "navigation.footer" in features %} {% if page.previous_page or
  page.next_page %} {% if page.meta and page.meta.hide %} {% set hidden =
  "hidden" if "footer" in page.meta.hide %} {% endif %}
  <nav
    class="md-footer__inner md-grid"
    aria-label="{{ lang.t('footer') }}"
    {{ hidden }}
  >
    <!-- Link to previous page -->
    {% if page.previous_page %} {% set direction = lang.t("footer.previous") %}
    <a
      href="{{ page.previous_page.url | url }}"
      class="md-footer__link md-footer__link--prev"
      aria-label="{{ direction }}: {{ page.previous_page.title | e }}"
    >
      <div class="md-footer__button md-icon">
        {% set icon = config.theme.icon.previous or "material/arrow-left" %} {%
        include ".icons/" ~ icon ~ ".svg" %}
      </div>
      <div class="md-footer__title">
        <span class="md-footer__direction"> {{ direction }} </span>
        <div class="md-ellipsis">{{ page.previous_page.title }}</div>
      </div>
    </a>
    {% endif %}

    <!-- Link to next page -->
    {% if page.next_page %} {% set direction = lang.t("footer.next") %}
    <a
      href="{{ page.next_page.url | url }}"
      class="md-footer__link md-footer__link--next"
      aria-label="{{ direction }}: {{ page.next_page.title | e }}"
    >
      <div class="md-footer__title">
        <span class="md-footer__direction"> {{ direction }} </span>
        <div class="md-ellipsis">{{ page.next_page.title }}</div>
      </div>
      <div class="md-footer__button md-icon">
        {% set icon = config.theme.icon.next or "material/arrow-right" %} {%
        include ".icons/" ~ icon ~ ".svg" %}
      </div>
    </a>
    {% endif %}
  </nav>
  {% endif %} {% endif %}

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="footer-wrapper">
        <!-- è®¿é—®ç»Ÿè®¡åŒºåŸŸ -->
        <div class="footer-content">
          <div class="footer-visit-count">
            <div class="footer-item">
              <!-- <span class="footer-icon">ğŸ‘€</span> -->
              <span>æœ¬ç«™è®¿é—®é‡ï¼š</span>
              <span id="finicount_views" class="footer-highlight"></span>
            </div>

            <div class="footer-item">
              <!-- <span class="footer-icon">ğŸ“</span> -->
              <a
                href="https://icp.gov.moe/?keyword=20230640"
                target="_blank"
                rel="noopener noreferrer"
                class="icp-link"
                >èŒICPå¤‡20230640å·</a>
            </div>

            <div class="footer-item runtime-info">
              <!-- <span class="footer-icon">â±ï¸</span> -->
              <span>æœ¬ç«™å·²ç»è¿è¡Œ</span>
              <span id="box1" class="footer-highlight"></span>
            </div>
          </div>
        </div>

        <!-- ç§»åŠ¨ç«¯ç®€æ´å¸ƒå±€ (ä»¿ footercopy.html) -->
        <div class="footer-visit-count-mobile">
          <span>æœ¬ç«™è®¿é—®é‡ï¼š</span>
          <span id="finicount_views_mobile" class="footer-highlight"></span>
          |
          <a
            href="https://icp.gov.moe/?keyword=20230640"
            target="_blank"
            rel="noopener noreferrer"
            class="icp-link"
          >èŒICPå¤‡20230640å·</a>
          <!-- |&nbsp; -->
          <span class="runtime-info">
            <span>æœ¬ç«™å·²ç»è¿è¡Œ</span>
            <span id="box1_mobile"></span>
          </span>
        </div>

        <!-- ç‰ˆæƒä¿¡æ¯å’Œç¤¾äº¤åª’ä½“æ°´å¹³å¸ƒå±€ -->
        <div class="footer-bottom-section">
          <div class="md-footer-copyright">
            <p>Copyright Â© 2022-2025 Wcowin</p>
            <p>Made with <a href="https://squidfunk.github.io/mkdocs-material/" style="color: #518FC1; text-decoration: none;">Material for MkDocs</a></p>
          </div>

          {% if config.extra.social %}
            <div class="footer-social">
              {% include "partials/social.html" %}
            </div>
          {% endif %}
        </div>
      </div>

      <script>
        (function() {
          // é¿å…å˜é‡å†²çªï¼Œå°†æ‰€æœ‰ä»£ç åŒ…è£…åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°ä¸­

          function timingTime() {
            const start = "2023-10-14T00:00:00";
            const startTime = new Date(start).getTime();
            const now = Date.now();
            let diff = Math.floor((now - startTime) / 1000);
            const days = Math.floor(diff / 86400);
            diff %= 86400;
            const hours = Math.floor(diff / 3600);
            diff %= 3600;
            const minutes = Math.floor(diff / 60);
            const seconds = diff % 60;
            return `${days}å¤©${hours}æ—¶${minutes}åˆ†${seconds}ç§’`;
          }

          // ç®€åŒ–çš„è®¡æ—¶å™¨æ›´æ–°å‡½æ•°
          function updateTime() {
            const el = document.getElementById("box1");
            const elMobile = document.getElementById("box1_mobile");
            const time = timingTime();

            if (el) el.textContent = time;
            if (elMobile) elMobile.textContent = time;
          }

          // åŠ è½½è®¿é—®é‡è®¡æ•°å™¨
          async function loadVisitCounter() {
            try {
              const script = document.createElement('script');
              script.src = '//finicounter.eu.org/finicounter.js';
              script.async = true;
              script.onerror = function() {
                console.log('è®¿é—®é‡è®¡æ•°å™¨åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ˜¾ç¤º');
                const desktop = document.getElementById("finicount_views");
                const mobile = document.getElementById("finicount_views_mobile");
                if (desktop) desktop.textContent = 'ç»Ÿè®¡ä¸­...';
                if (mobile) mobile.textContent = 'ç»Ÿè®¡ä¸­...';
              };
              document.head.appendChild(script);
            } catch (e) {
              console.log('è®¿é—®é‡è®¡æ•°å™¨åˆå§‹åŒ–å¤±è´¥:', e);
            }
          }

          // åŒæ­¥è®¿é—®é‡æ˜¾ç¤º
          function syncVisitCount() {
            const desktop = document.getElementById("finicount_views");
            const mobile = document.getElementById("finicount_views_mobile");
            if (desktop && mobile && desktop.textContent && desktop.textContent !== 'åŠ è½½ä¸­...') {
              mobile.textContent = desktop.textContent;
            }
          }

          // ç›‘å¬è®¿é—®é‡æ›´æ–°
          function setupVisitCountObserver() {
            try {
              const observer = new MutationObserver(syncVisitCount);
              const visitCountTarget = document.getElementById("finicount_views");
              if (visitCountTarget) {
                observer.observe(visitCountTarget, { childList: true, subtree: true });
              }
            } catch (e) {
              console.log('è®¿é—®é‡ç›‘å¬å™¨è®¾ç½®å¤±è´¥:', e);
            }
          }

          // åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
          function init() {
            // å¯åŠ¨è®¡æ—¶å™¨
            updateTime();
            setInterval(updateTime, 1000);

            // åŠ è½½è®¿é—®é‡è®¡æ•°å™¨
            loadVisitCounter();

            // è®¾ç½®è®¿é—®é‡åŒæ­¥
            setupVisitCountObserver();

            // è°ƒè¯•ä¿¡æ¯
            console.log('é¡µè„šåŠŸèƒ½å·²å¯åŠ¨');
            console.log('å½“å‰æ—¶é—´:', timingTime());
          }

          // ç¡®ä¿DOMåŠ è½½å®Œæˆåå†åˆå§‹åŒ–
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
          } else {
            init();
          }

        })();
      </script>

      <style>
        /* é¡µè„šèƒŒæ™¯é…è‰²æ–¹æ¡ˆ - å¯æ ¹æ®å–œå¥½é€‰æ‹© */

        /* æ–¹æ¡ˆ1: ç°ä»£æ·±è“ç°è‰²è°ƒ (å½“å‰ä½¿ç”¨) */
        .md-footer {
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }

        .md-footer-meta {
          background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        /* æ–¹æ¡ˆ2: ä¼˜é›…ç´«è‰²è°ƒ (å–æ¶ˆæ³¨é‡Šä½¿ç”¨)
        .md-footer {
          background: linear-gradient(135deg, #2d1b69 0%, #4c1d95 100%);
        }

        .md-footer-meta {
          background: linear-gradient(135deg, #1e1b4b 0%, #2d1b69 100%);
        }
        */

        /* æ–¹æ¡ˆ3: æ¸©æš–æ·±ç»¿è‰²è°ƒ (å–æ¶ˆæ³¨é‡Šä½¿ç”¨)
        .md-footer {
          background: linear-gradient(135deg, #14532d 0%, #166534 100%);
        }

        .md-footer-meta {
          background: linear-gradient(135deg, #052e16 0%, #14532d 100%);
        }
        */

        /* æ–¹æ¡ˆ4: ç»å…¸æ·±ç°è‰²è°ƒ (å–æ¶ˆæ³¨é‡Šä½¿ç”¨)
        .md-footer {
          background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
        }

        .md-footer-meta {
          background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
        }
        */

        /* æ•´ä½“é¡µè„šå®¹å™¨ */
        .footer-wrapper {
          width: 100%;
          padding: 0.2rem 0;
          text-align: center;
        }

        /* ç‰ˆæƒä¿¡æ¯å’Œç¤¾äº¤åª’ä½“æ°´å¹³å¸ƒå±€ */
        .footer-bottom-section {
          max-width: 900px;
          margin: 0.4rem auto 0;
          padding: 0.4rem 1rem;
          border-top: 1px solid rgba(255, 255, 255, 0.15);
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        /* ç‰ˆæƒä¿¡æ¯ */
        .md-footer-copyright {
          text-align: left;
          font-size: 0.75rem;
          opacity: 0.8;
          line-height: 1.2;
        }

        /* ç¤¾äº¤åª’ä½“å›¾æ ‡ */
        .footer-social {
          display: -webkit-flex;
          display: flex;
          gap: 0.3rem;
          -webkit-align-items: center;
          align-items: center;
        }

        /* Safariå…¼å®¹æ€§ä¿®å¤ */
        .footer-social .md-social__link svg {
          -webkit-transform: translateZ(0);
          transform: translateZ(0);
          backface-visibility: hidden;
          -webkit-backface-visibility: hidden;
          opacity: 1 !important;
          visibility: visible !important;
          pointer-events: auto;
        }

        /* å¼ºåˆ¶Safariæ˜¾ç¤ºSVGå›¾æ ‡ */
        .footer-social .md-social__link {
          opacity: 1 !important;
          visibility: visible !important;
        }
        
        /* å†…å®¹åŒºåŸŸæ ·å¼ */
        .footer-content {
          max-width: 900px;
          margin: 0 auto;
          padding: 0.4rem 0 0;
        }

        .footer-visit-count {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.3rem;
          font-size: 0.75rem;
          color: var(--md-footer-fg-color--light);
        }

        .footer-item {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.4rem 0.8rem;
          border-radius: 16px;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(10px);
          min-width: 160px;
          font-size: 0.8rem;
          transition: all 0.2s ease;
        }

        .footer-item:hover {
          background: rgba(255, 255, 255, 0.15);
          border-color: rgba(81, 143, 193, 0.4);
          transform: translateY(-1px);
        }
        
        .footer-icon {
          margin-right: 0.5rem;
          font-size: 1rem;
        }
        
        .footer-highlight {
          color: #939ba2;
          font-weight: 600;
          margin-left: 0.3rem;
        }

        .icp-link {
          color: inherit;
          text-decoration: none;
        }

        .icp-link:hover {
          color: #518FC1;
        }
        
        /* ç¤¾äº¤åª’ä½“å›¾æ ‡æ ·å¼ - ä»…æ¡Œé¢ç«¯ */
        @media (min-width: 76.1875em) {
          .footer-social .md-social__link {
            padding: 0.3rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 2rem;
            height: 2rem;
            display: -webkit-inline-flex;
            display: inline-flex;
            -webkit-align-items: center;
            align-items: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-transition: all 0.2s ease;
            transition: all 0.2s ease;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
          }

          .footer-social .md-social__link svg {
            width: 1.2rem;
            height: 1.2rem;
            fill: currentColor;
            -webkit-flex-shrink: 0;
            flex-shrink: 0;
          }

          .footer-social .md-social__link:hover {
            background: rgba(81, 143, 193, 0.2);
            border-color: rgba(81, 143, 193, 0.4);
          }
        }

        /* ç§»åŠ¨ç«¯ç¤¾äº¤åª’ä½“å›¾æ ‡æ ·å¼ - æ¢å¤é»˜è®¤æ ·å¼ */
        @media (max-width: 76.1875em) {
          .footer-social .md-social__link {
            padding: 0.4rem;
            background: transparent;
            border: none;
            width: auto;
            height: auto;
            display: inline-block;
            border-radius: 0;
            -webkit-transition: color 0.2s ease;
            transition: color 0.2s ease;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
          }

          .footer-social .md-social__link:hover {
            background: transparent;
            border: none;
            color: var(--md-accent-fg-color);
          }

          .footer-social .md-social__link svg {
            width: 1.6rem;
            height: 1.6rem;
            fill: currentColor;
            -webkit-flex-shrink: 0;
            flex-shrink: 0;
            display: block;
          }
        }
        
        /* å¯¼èˆªé“¾æ¥æ ·å¼ */
        .md-footer__link {
          transition: opacity 0.2s ease;
        }
        
        .md-footer__link:hover {
          opacity: 1;
        }

        /* ç§»åŠ¨ç«¯å“åº”å¼ - ä½¿ç”¨ footercopy.html æ ·å¼ */
        @media (max-width: 76.1875em) {
          /* éšè—æ¡Œé¢ç«¯çš„å¡ç‰‡å¼å¸ƒå±€ */
          .footer-visit-count {
            display: none;
          }

          .footer-bottom-section {
            flex-direction: column;
            gap: 0.6rem;
            text-align: center;
          }

          .md-footer-copyright {
            text-align: center;
            font-size: 0.75rem;
          }

          .footer-social .md-social__link {
            width: 1.8rem;
            height: 1.8rem;
          }

          /* æ˜¾ç¤ºç§»åŠ¨ç«¯çš„ç®€æ´å¸ƒå±€ */
          .footer-visit-count-mobile {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.4em 0.8em;
            padding: 0.2em 0;
            font-size: 0.75rem;
            color: var(--md-footer-fg-color--light);
            text-align: center;
          }

          .footer-visit-count-mobile > * {
            white-space: nowrap;
          }

          .footer-visit-count-mobile .icp-link {
            color: var(--md-footer-fg-color--light);
            text-decoration: none;
          }

          .footer-visit-count-mobile .icp-link:hover {
            color: #596875;
            text-decoration: underline;
          }

          /* .runtime-info {
            display: none; ç§»åŠ¨ç«¯éšè—è¿è¡Œæ—¶é—´
          } */
        }

        /* æ¡Œé¢ç«¯éšè—ç§»åŠ¨ç«¯å¸ƒå±€ */
        @media (min-width: 76.1875em) {
          .footer-visit-count-mobile {
            display: none;
          }
        }

        @media (min-width: 768px) {
          .footer-visit-count {
            flex-direction: row;
            justify-content: center;
            gap: 2rem;
          }
        }

        /* æ·±è‰²æ¨¡å¼é€‚é… */
        [data-md-color-scheme="slate"] .md-footer {
          background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        [data-md-color-scheme="slate"] .md-footer-meta {
          background: linear-gradient(135deg, #020617 0%, #0f172a 100%);
        }

        [data-md-color-scheme="slate"] .footer-item {
          background: rgba(255, 255, 255, 0.08);
          border-color: rgba(255, 255, 255, 0.12);
        }

        [data-md-color-scheme="slate"] .footer-item:hover {
          background: rgba(255, 255, 255, 0.12);
          border-color: rgba(81, 143, 193, 0.3);
        }

        [data-md-color-scheme="slate"] .footer-social .md-social__link {
          background: rgba(255, 255, 255, 0.08);
          border-color: rgba(255, 255, 255, 0.12);
        }
      </style>
    </div>
  </div>
</footer>